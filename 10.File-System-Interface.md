# Chapter 10: File-System Interface

## File Concept

A file is a named collection of related information that is recorded on secondary storage. From a user's perspective, a file is the smallest allotment of logical secondary storage; that is, data cannot be written to secondary storage unless they are within a file.

### File Attributes

A file is named, for the convenience of its human users, and is referred to by its name. A name is usually a string of characters. Some file systems distinguish between uppercase and lowercase characters in names, whereas others do not.

A file's attributes vary from one operating system to another but typically consist of these:
-   **Name:** The symbolic file name is the only information kept in human-readable form.
-   **Identifier:** This unique tag, usually a number, identifies the file within the file system; it is the non-human-readable name for the file.
-   **Type:** This information is needed for systems that support different types of files.
-   **Location:** This information is a pointer to a device and to the location of the file on that device.
-   **Size:** The current size of the file (in bytes, words, or blocks) and possibly the maximum allowed size are included in this attribute.
-   **Protection:** Access-control information determines who can do reading, writing, executing, and so on.
-   **Time, date, and user identification:** This information may be kept for creation, last modification, and last use.

### File Operations

A file is an abstract data type. To define a file properly, we need to consider the operations that can be performed on files. The operating system provides system calls to create, write, read, reposition, delete, and truncate files.

-   **Creating a file:** Two steps are necessary to create a file. First, space in the file system must be found for the file. Second, an entry for the new file must be made in the directory.
-   **Writing a file:** To write a file, we make a system call specifying both the name of the file and the information to be written to the file.
-   **Reading a file:** To read from a file, we use a system call that specifies the name of the file and where (in memory) the next block of the file should be put.
-   **Repositioning within a file:** The directory is searched for the appropriate entry, and the current-file-position pointer is repositioned to a given value. Repositioning within a file need not involve any actual I/O. This file operation is also known as a file seek.
-   **Deleting a file:** To delete a file, we search the directory for the named file. Having found the associated directory entry, we release all file space, so that it can be reused by other files, and erase the directory entry.
-   **Truncating a file:** The user may want to erase the contents of a file but keep its attributes. Rather than forcing the user to delete the file and then recreate it, this function allows all attributes to remain unchanged—except for file length—but lets the file be reset to length zero and its file space released.

## Access Methods

Files store information. When it is used, this information must be accessed and read into computer memory. The information in the file can be accessed in several ways.

-   **Sequential Access:** The simplest access method is sequential access. Information in the file is processed in order, one record after the other.
-   **Direct Access:** The direct-access method (or relative access) allows a program to read and write records rapidly in no particular order. The file is viewed as a numbered sequence of blocks or records.
-   **Other Access Methods:** Other access methods can be built on top of a direct-access method. These other methods generally involve the creation of an index for the file. The index, like an index in the back of a book, contains pointers to the various blocks.

## Directory and Disk Structure

The file system is composed of many different files. The operating system imposes a structure on these files. This structure is usually a directory structure.

-   **Single-Level Directory:** The simplest directory structure is the single-level directory. All files are contained in the same directory, which is easy to support and understand.
-   **Two-Level Directory:** In the two-level directory structure, each user has his own user file directory (UFD).
-   **Tree-Structured Directories:** A tree-structured directory is a generalization of a two-level directory. It allows users to create their own subdirectories and to organize their files accordingly.
-   **Acyclic-Graph Directories:** An acyclic graph allows directories to share subdirectories and files.
-   **General Graph Directory:** A general graph directory structure allows cycles. The main problem with this structure is in searching for a file.

## File-System Mounting

A file system must be **mounted** before it can be accessed. The operating system is given the name of the device and the **mount point**—the location within the file structure where the file system is to be attached.

## File Sharing

The file-sharing capabilities of a multi-user system are desirable. Sharing may be done through a protection scheme.

-   **Multiple Users:** In a multi-user system, the file system must support the sharing of files.
-   **Remote File Systems:** With networking, file systems can be shared across a network. The client-server model is a common way to implement remote file systems.
-   **The Client-Server Model:** A server is a machine that provides a service, and a client is a machine that requests a service. In the context of file systems, a server can be a file server that provides access to its files.

## Protection

When information is kept in a computer system, we want to keep it safe from physical damage (reliability) and improper access (protection).

-   **Types of Access:** The type of access that can be controlled includes reading, writing, executing, appending, deleting, and listing.
-   **Access Control:** The most common approach to the protection problem is to make access dependent on the identity of the user. Various users may need different types of access to a file or directory. The most general scheme to implement identity-dependent access is to associate with each file and directory an **access-control list (ACL)** specifying the user names and the types of access allowed for each user.
